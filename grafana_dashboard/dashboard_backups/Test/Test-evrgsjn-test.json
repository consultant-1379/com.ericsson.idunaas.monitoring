{"annotations": {"list": [{"builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "gnetId": null, "graphTooltip": 0, "id": 146, "iteration": 1660660894909, "links": [], "panels": [{"datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 4, "panels": [], "title": "Overall failures", "type": "row"}, {"datasource": "${environment}", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "links": [{"targetBlank": true, "title": "Link to EIAPaaS K8s Cluster", "url": "http://150.132.8.132:3000/d/ArIC5UGnk1/idun-aas-k8s-cluster?orgId=1&refresh=30s&var-ds=${environment}&var-datasource=${environment}&var-namespace=All&var-node=All"}], "mappings": [{"options": {"match": "null", "result": {"color": "dark-red", "index": 0, "text": "! Alert. Serious Problem with Environment"}}, "type": "special"}, {"options": {"match": "nan", "result": {"color": "dark-red", "index": 1, "text": "! Alert. Serious Problem with Environment"}}, "type": "special"}], "noValue": "-", "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "orange", "value": 1}, {"color": "red", "value": 5}]}}, "overrides": []}, "gridPos": {"h": 7, "w": 4, "x": 0, "y": 1}, "id": 2, "maxPerRow": 6, "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.1.3", "repeat": "environment", "repeatDirection": "h", "targets": [{"exemplar": true, "expr": "sum(kube_pod_status_phase{namespace=~\"$namespace\", phase=\"Failed\"})", "format": "time_series", "instant": false, "interval": "", "intervalFactor": 1, "legendFormat": "pods_failed", "refId": "A"}, {"exemplar": true, "expr": "sum(kube_job_status_failed{namespace=~\"$namespace\"})", "hide": false, "instant": false, "interval": "", "legendFormat": "jobs_failed", "refId": "B"}, {"exemplar": true, "expr": "sum(kube_deployment_status_replicas_unavailable{namespace=~\"$namespace\"})", "hide": false, "instant": false, "interval": "", "legendFormat": "deployment_reps_unavailable", "refId": "C"}, {"exemplar": true, "expr": "sum(kube_node_spec_unschedulable{})", "hide": false, "interval": "", "legendFormat": "nodes_unavailable", "refId": "D"}], "title": "${environment}", "transformations": [{"id": "calculateField", "options": {"mode": "reduceRow", "reduce": {"include": ["jobs_failed", "deployment_reps_unavailable", "nodes_unavailable"], "reducer": "sum"}, "replaceFields": true}}], "type": "stat"}], "refresh": "", "schemaVersion": 30, "style": "dark", "tags": [], "templating": {"list": [{"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "description": "List of all  EIAPaaS EKS Environments", "error": null, "hide": 0, "includeAll": true, "label": "Environment", "multi": true, "name": "environment", "options": [], "query": "prometheus", "queryValue": "", "refresh": 1, "regex": "^(?!(?:subsystems|Subsystem-XDN)$).*$", "skipUrlSync": false, "type": "datasource"}, {"allValue": null, "current": {"selected": false, "text": "All", "value": "$__all"}, "datasource": "${environment}", "definition": "label_values(node)", "description": null, "error": null, "hide": 2, "includeAll": true, "label": null, "multi": false, "name": "env_node", "options": [], "query": {"query": "label_values(node)", "refId": "StandardVariableQuery"}, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}, {"allValue": null, "current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "description": null, "error": null, "hide": 0, "includeAll": true, "label": "namespace", "multi": true, "name": "namespace", "options": [{"selected": true, "text": "All", "value": "$__all"}, {"selected": false, "text": "ossbmas01", "value": "ossbmas01"}, {"selected": false, "text": "oss", "value": "oss"}, {"selected": false, "text": "ossbnew02", "value": "ossbnew02"}, {"selected": false, "text": "ossecos01", "value": "ossecos01"}, {"selected": false, "text": "ossdev01", "value": "ossdev01"}, {"selected": false, "text": "ossern01", "value": "ossern01"}, {"selected": false, "text": "ossbnew03", "value": "ossbnew03"}, {"selected": false, "text": "idunopenlab01", "value": "idunopenlab01"}, {"selected": false, "text": "idunossautoapp01", "value": "idunossautoapp01"}, {"selected": false, "text": "ossviavi01", "value": "ossviavi01"}, {"selected": false, "text": "ossinfov01", "value": "ossinfov01"}], "query": "ossbmas01,oss,ossbnew02,ossecos01,ossdev01,ossern01,ossbnew03,idunopenlab01,idunossautoapp01,ossviavi01,ossinfov01", "queryValue": "", "skipUrlSync": false, "type": "custom"}]}, "time": {"from": "now-6h", "to": "now"}, "timepicker": {}, "timezone": "", "title": "evrgsjn-test", "uid": "Wdgzjm9nz", "version": 18}