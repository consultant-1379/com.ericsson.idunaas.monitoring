{"annotations": {"list": [{"builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "gnetId": null, "graphTooltip": 0, "id": 181, "iteration": 1668700279237, "links": [], "panels": [{"datasource": null, "gridPos": {"h": 16, "w": 24, "x": 0, "y": 0}, "id": 90, "options": {"content": "<h1 style=\"background-color: #002561;text-align: center\">\n  Dashboard for Overall Utilization of EIAPaaS Deployments\n</h1>\n<p style=\"font-style: italic\">Computation is based on User Login count, AWS Costs, rApp count & Loadbalancer traffic</p>\n<hr width=\"100%\" />\n<h4>User Login count</h4>\n<p>Total number of API and GUI login to the application during the specified dashboard interval (Default to 7d). Utilization can be deduced from below color code:</p>\n<table style=\"border:1px solid black;width:30%\"> \n   <tr>\n    <th style=\"background-color: #696969\">Panel Color</th>\n    <th style=\"background-color: #696969\">Range</th>\n    <th style=\"background-color: #696969\">Utilization</th>    \n  </tr> \n  <tr>\n    <td style=\"color: Orange\">Orange</td>\n    <td>Above 100k</td>\n    <td>Very High</td>    \n  </tr>\n  <tr>\n    <td style=\"color: Yellow\">Yellow</td>\n    <td>Between 10k to 100k</td>\n    <td>Average to High</td>    \n  </tr>\n  <tr>\n    <td style=\"color: Green\">Green</td>\n    <td>Between Alert Threshold to 10k</td>\n    <td>Low</td>    \n  </tr>\n  <tr>\n    <td style=\"color: Grey\">Grey</td>\n    <td>Below Alert Threshold</td>\n    <td style=\"font-style: italic\">Very Low!</td>    \n  </tr>\n</table>\n<b style=\"background-color: #2F4F4F\">Click on any Deployment panel to navigate to Detailed view including Loadbalancer Utilization</b>\n<br>\n<table style=\"border:1px solid black;width:30%\">    \n  <tr>\n    <td>Avg Login count threshold per day</td>\n    <td>$alert_threshold</td>    \n  </tr>\n</table>\n<hr width=\"100%\" />\n<h4>Monthly Cost</h4>\n<p>AWS Account cost in USD for the previous completed month</p>\n<hr width=\"100%\" />\n<h4>rAPP Count</h4>\n<p>Total number of rApps deployed on EIAP application</p>\n           ", "mode": "html"}, "pluginVersion": "8.1.3", "type": "text"}, {"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 16}, "id": 2, "panels": [], "title": "User Login Count", "type": "row"}, {"datasource": "${environment}", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "links": [{"targetBlank": true, "title": "Link to Deployments Detail Info Page", "url": "http://150.132.8.132:3000/d/Jgl8ks4Vk/deployment-utilization-information?orgId=1&var-environment=${environment}"}], "mappings": [{"options": {"null": {"color": "red", "index": 0, "text": "No Data"}}, "type": "value"}, {"options": {"match": "null", "result": {"color": "red", "index": 1, "text": "No Data"}}, "type": "special"}], "thresholds": {"mode": "absolute", "steps": [{"color": "#939893", "value": null}, {"color": "green", "value": 300}, {"color": "yellow", "value": 10000}, {"color": "orange", "value": 100000}]}, "unit": "short"}, "overrides": []}, "gridPos": {"h": 8, "w": 4, "x": 0, "y": 17}, "id": 4, "maxPerRow": 6, "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {"valueSize": 40}, "textMode": "auto"}, "pluginVersion": "8.1.3", "repeat": "environment", "repeatDirection": "h", "targets": [{"exemplar": true, "expr": "round(sum(delta(keycloak_logins{client_id=\"eo\"}[$__range])))", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "${environment}", "transparent": true, "type": "stat"}, {"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 41}, "id": 17, "panels": [], "title": "Monthly Cost (in USD)", "type": "row"}, {"datasource": "${aws_cost_environment}", "fieldConfig": {"defaults": {"color": {"fixedColor": "super-light-blue", "mode": "fixed"}, "links": [], "mappings": [{"options": {"match": "null", "result": {"color": "transparent", "index": 0, "text": "No Data"}}, "type": "special"}], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}, "unit": "currencyUSD"}, "overrides": []}, "gridPos": {"h": 8, "w": 2.6666666666666665, "x": 0, "y": 42}, "id": 30, "maxPerRow": 12, "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {"valueSize": 30}, "textMode": "auto"}, "pluginVersion": "8.1.3", "repeat": "aws_cost_environment", "repeatDirection": "h", "targets": [{"exemplar": true, "expr": "aws_last_month_usage_costs", "instant": false, "interval": "", "legendFormat": "Last month usage", "refId": "A"}], "title": "${aws_cost_environment}", "transparent": true, "type": "stat"}, {"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 50}, "id": 54, "panels": [], "title": "rAPP Count", "type": "row"}, {"datasource": "${environment}", "fieldConfig": {"defaults": {"color": {"mode": "fixed"}, "mappings": [{"options": {"-1": {"index": 0, "text": "*"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 4, "w": 2, "x": 0, "y": 51}, "id": 56, "maxPerRow": 12, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {"valueSize": 40}, "textMode": "auto"}, "pluginVersion": "8.1.3", "repeat": "environment", "repeatDirection": "h", "targets": [{"exemplar": true, "expr": "number_of_apps{job=\"eiapaas_custom_exporter\"}", "hide": false, "interval": "", "legendFormat": "", "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "${environment}", "transformations": [], "type": "stat"}], "schemaVersion": 30, "style": "dark", "tags": [], "templating": {"list": [{"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "description": null, "error": null, "hide": 2, "includeAll": true, "label": "Environment", "multi": true, "name": "environment", "options": [], "query": "prometheus", "queryValue": "", "refresh": 1, "regex": "^(?!(?:.*dev.*|.*[Tt]est.*|DEV1-EIAP_PROM|Prometheus-.*|subsystems|Prometheus-1-dev2|Subsystem-XDN|dev1-eiappm|Prometheus|idunaasdev03|idunaasdev04)$).*$", "skipUrlSync": false, "type": "datasource"}, {"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "description": null, "error": null, "hide": 2, "includeAll": true, "label": "aws_cost_Environment", "multi": true, "name": "aws_cost_environment", "options": [], "query": "prometheus", "queryValue": "", "refresh": 1, "regex": "^(?!(?:.*dev.*|.*[Tt]est.*|openlab01|viavieiap01|DEV1-EIAP_PROM|Prometheus-.*|subsystems|Prometheus-1-dev2|bnewidun03|bnewidun05|Subsystem-XDN|dev1-eiappm|Prometheus|idunaasdev03|idunaasdev04)$).*$", "skipUrlSync": false, "type": "datasource"}, {"description": "Alert Threshold for least User Login count ", "error": null, "hide": 2, "label": "Alert Threshold", "name": "alert_threshold", "query": "300", "skipUrlSync": false, "type": "constant"}]}, "time": {"from": "now-7d", "to": "now"}, "timepicker": {}, "timezone": "", "title": "EIAPaaS Deployment Utilization", "uid": "Zagl3qH4z", "version": 94}