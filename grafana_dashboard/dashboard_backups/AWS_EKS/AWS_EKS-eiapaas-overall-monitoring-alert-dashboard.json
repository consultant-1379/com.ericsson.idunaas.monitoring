{"annotations": {"list": [{"builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "description": "Alerts dashboard for overall monitoring of pods failed, jobs failed, deployment replicaset unavailable, nodes unavailable and running pvc's about 70%. If threshold breached, then send alert email.", "editable": true, "gnetId": null, "graphTooltip": 0, "id": 159, "iteration": 1660677258040, "links": [], "panels": [{"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 15, "panels": [], "title": "Overall Alerts", "type": "row"}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "${environment}", "description": "${environment} Alert Dashboard for pods failed, jobs failed, deployment_replicas unavailable, nodes unavailable in the namespace ossbmas01 and running pvc's above 70% for the environment ${environment}", "fieldConfig": {"defaults": {"unit": "short"}, "overrides": []}, "fill": 1, "fillGradient": 0, "gridPos": {"h": 9, "w": 12, "x": 0, "y": 1}, "hiddenSeries": false, "id": 13, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "maxPerRow": 2, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "repeat": "environment", "repeatDirection": "h", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "sum(kube_pod_status_phase{namespace=~\"$namespace\", phase=\"Failed\", pod!~\"eric-data-search-engine-curator.+\"})", "interval": "", "legendFormat": "Pods Failed", "refId": "Pods Failed"}, {"exemplar": true, "expr": "sum(kube_job_status_failed{namespace=~\"$namespace\", job_name!~\"eric-data-search-engine-curator.+\"})", "hide": false, "interval": "", "legendFormat": "Jobs Failed", "refId": "Jobs Failed"}, {"exemplar": true, "expr": "sum(kube_deployment_status_replicas_unavailable{namespace=~\"$namespace\"})", "hide": false, "interval": "", "legendFormat": "Deployment Replica Unavailable", "refId": "Deployment Replicaset Unavailable"}, {"exemplar": true, "expr": "sum(kube_node_spec_unschedulable{node=~\"ip-[0-9]{3}-[0-9]{2}-[0-9]{2}-[0-9]{1,3}.*\"})", "hide": false, "interval": "", "legendFormat": "Nodes Unavailable", "refId": "Nodes Unavailable"}, {"exemplar": true, "expr": "count (max by (persistentvolumeclaim,namespace) (kubelet_volume_stats_used_bytes ) and (max by (persistentvolumeclaim,namespace) (kubelet_volume_stats_used_bytes )) / (max by (persistentvolumeclaim,namespace) (kubelet_volume_stats_capacity_bytes )) >= (70 / 100)) or vector (0)", "hide": false, "interval": "", "legendFormat": "Running PVCs Above 70%   ", "refId": "Running PVCs Above 70%"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "${environment} Overall Monitoring Alert", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:63", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}, {"$$hashKey": "object:64", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}], "refresh": "", "schemaVersion": 30, "style": "dark", "tags": [], "templating": {"list": [{"current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "description": "List of all  EIAPaaS EKS Environments", "error": null, "hide": 0, "includeAll": true, "label": "Environment", "multi": true, "name": "environment", "options": [], "query": "prometheus", "queryValue": "", "refresh": 1, "regex": "^(?!(?:subsystems|Subsystem-XDN|dev1-eiappm|Prometheus)$).*$", "skipUrlSync": false, "type": "datasource"}, {"allValue": null, "current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "description": null, "error": null, "hide": 0, "includeAll": true, "label": "Namespace", "multi": true, "name": "namespace", "options": [{"selected": true, "text": "All", "value": "$__all"}, {"selected": false, "text": "ossbmas01", "value": "ossbmas01"}, {"selected": false, "text": "oss", "value": "oss"}, {"selected": false, "text": "ossbnew02", "value": "ossbnew02"}, {"selected": false, "text": "ossecos01", "value": "ossecos01"}, {"selected": false, "text": "ossdev01", "value": "ossdev01"}, {"selected": false, "text": "ossern01", "value": "ossern01"}, {"selected": false, "text": "ossbnew03", "value": "ossbnew03"}, {"selected": false, "text": "idunopenlab01", "value": "idunopenlab01"}, {"selected": false, "text": "idunossautoapp01", "value": "idunossautoapp01"}, {"selected": false, "text": "ossviavi01", "value": "ossviavi01"}, {"selected": false, "text": "ossinfov01", "value": "ossinfov01"}], "query": "ossbmas01,oss,ossbnew02,ossecos01,ossdev01,ossern01,ossbnew03,idunopenlab01,idunossautoapp01,ossviavi01,ossinfov01", "queryValue": "", "skipUrlSync": false, "type": "custom"}]}, "time": {"from": "now-6h", "to": "now"}, "timepicker": {}, "timezone": "", "title": "EIAPaaS Overall Monitoring Alert Dashboard", "uid": "c24A0PmVz", "version": 3}